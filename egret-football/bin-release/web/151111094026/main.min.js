var Enemy=function(){function e(e){this.name="Enemy4",this.siteX=800,this.isDie=!1,this.direction="left",this.directionX=560,this.targer=e,this.siteX=800+200*Math.random(),this.directionX=700-300*Math.random(),this.name="Enemy"+Math.floor(Math.random()*GameData.enemyTypeNum+1),this.add=Tool.addBitmap(this.targer,"game_add_png",0,0,0,0,!1),this.add.visible=!1,this.run()}var t=(__define,e);return p=t.prototype,p.run=function(){var e=RES.getRes(this.name+"_run_json"),t=RES.getRes(this.name+"_run_png"),a=new egret.MovieClipDataFactory(e,t);this.body=new egret.MovieClip(a.generateMovieClipData("run")),this.body.x=this.siteX+GameData[this.name].run.offsetX,this.body.y=GameData[this.name].run.offsetY,this.body.scaleX=-GameData[this.name].scaleX,this.body.scaleY=GameData[this.name].scaleY,this.body.play(999),this.targer.addChild(this.body)},p.flash=function(){this.siteX<730&&(GameData.isEnter=!0),0==this.isDie&&("left"==this.direction?(this.siteX-=2,this.body.x=this.siteX+GameData[this.name].run.offsetX,this.siteX<this.directionX&&(this.body.scaleX=GameData[this.name].scaleX,this.direction="right",this.directionX=650+80*Math.random(),this.body.x=this.siteX+GameData[this.name].right.offsetX)):"right"==this.direction&&(this.siteX+=2,this.body.x=this.siteX+GameData[this.name].right.offsetX,this.siteX>this.directionX&&(this.body.scaleX=-GameData[this.name].scaleX,this.direction="left",this.directionX=680-(20+150*Math.random()),this.body.x=this.siteX+GameData[this.name].run.offsetX)))},p.die=function(){if(GameData.isEnter=!1,this.isDie=!0,this.add.visible=!0,this.add.x="left"==this.direction?this.body.x-50:this.body.x+50,this.add.y=this.body.y-this.add.height,this.body.stop(),GameData.score++,GameData.goldNum++,null!=this.body){var e=egret.Tween.get(this.add);e.to({alpha:.5,y:250},500).call(function(){this.targer.removeChild(this.add),this.add=null},this);var e=egret.Tween.get(this.body);e.to({alpha:.5},500).call(function(){this.targer.removeChild(this.body),this.body=null},this)}},e}();egret.registerClass(Enemy,"Enemy");var Hero=function(){function e(e){this.isDie=!1,this.ballBaseX=125,this.targetX=700,this.targetY=330,this.returnNodePre=.4,this.returnNodeY=150,this.returnType=0,this.returnX=-75,this.returnY=385,this.returnSpeed=10,this.isCommon=!1,this.attackIndex=0,this.targer=e,this.ball=Tool.addBitmap(e,"game_ball_png",125,385,30,30,!1),this.sight=Tool.addBitmap(e,"game_sight_png",125,385,120,100,!1),this.ball.anchorOffsetX=this.ball.width/2,this.ball.anchorOffsetY=this.ball.height/2,this.sight.anchorOffsetX=this.sight.width/2,this.sight.anchorOffsetY=this.sight.height/2,this.run()}var t=(__define,e);return p=t.prototype,p.changeEffect=function(){this.effectComp();var e="effect0",t=RES.getRes(e+"_json"),a=RES.getRes(e+"_png"),i=new egret.MovieClipDataFactory(t,a);this.effect=new egret.MovieClip(i.generateMovieClipData(e)),0==this.returnType?(this.effect.x=80,this.effect.y=330,this.effect.scaleX=GameData.Hero.effect0Scale,this.effect.scaleY=GameData.Hero.effect0Scale,1==this.attackIndex&&(this.effect.y=280),this.ball.x=255,this.ball.y=385):1==this.returnType?(this.effect.scaleX=GameData.Hero.effect0Scale,this.effect.scaleY=GameData.Hero.effect0Scale,this.effect.x=80,this.effect.y=200,this.effect.rotation=4,1==this.attackIndex&&(this.effect.y=160),this.ball.x=230,this.ball.y=240):2==this.returnType?(this.effect.scaleX=GameData.Hero.effect0Scale,this.effect.scaleY=GameData.Hero.effect0Scale,this.effect.x=150,this.effect.y=160,this.effect.rotation=12,1==this.attackIndex&&(this.effect.y=120),this.ball.x=325,this.ball.y=230):3==this.returnType&&(this.effect.scaleX=GameData.Hero.effect0Scale,this.effect.scaleY=GameData.Hero.effect0Scale,this.effect.x=70,this.effect.y=120,this.effect.rotation=16,1==this.attackIndex&&(this.effect.y=80),this.ball.x=190,this.ball.y=190),this.effect.play(1),this.targer.addChild(this.effect),this.targer.setChildIndex(this.ball,99),this.effect.addEventListener(egret.Event.COMPLETE,this.effectComp,this)},p.effectComp=function(){null!=this.effect&&(this.effect.removeEventListener(egret.Event.COMPLETE,this.effectComp,this),this.targer.removeChild(this.effect),this.effect=null,this.ball.visible=!0,GameData.ballState="shoot",GameData.ballSpeed=10,GameData.attackOver=!0)},p.changeStage=function(e){GameData.attackOver=!1,null!=this.body&&(this.body.removeEventListener(egret.Event.COMPLETE,this.run,this),this.targer.removeChild(this.body),this.body=null);var t=RES.getRes(GameData.heroName+"_attack0_json"),a=RES.getRes(GameData.heroName+"_attack0_png"),i=new egret.MovieClipDataFactory(t,a);this.body=new egret.MovieClip(i.generateMovieClipData("attack0")),this.body.scaleX=GameData.Hero.attackScale,this.body.scaleY=GameData.Hero.attackScale;var s=18;0==this.returnType?(this.body.x=0,this.body.y=250+s):1==this.returnType?(this.body.x=0,this.body.y=180):2==this.returnType?(this.body.x=70,this.body.y=190):3==this.returnType&&(this.body.x=-30,this.body.y=75),"die"==e&&(this.body.visible=!1,this.sight.visible=!1),this.targer.addChild(this.body),"die"!=e?(this.body.play(1),this.body.addEventListener(egret.Event.COMPLETE,this.run,this)):(this.body.play(999),this.body=null,this.isDie=!0,GameData.backgroundSpeed=0-.5*GameData.returnSpeedUp,meiriq.CommonComponent.instance.executedHook("gameover",GameData.score,function(){meiriq.CommonComponent.instance.executedHook("restart"),GameData.reset(),GameData.saveData(),UIManage.getInstance().hideGame(),UIManage.getInstance().showWelcome()},this))},p.common=function(){GameData.ballSpeed=0,GameData.ballState="shoot",this.isCommon=!0,this.targetX=350,this.targetY=385,this.returnNodePre=.8,this.returnNodeY=385,this.returnX=-75,this.returnY=385,this.returnSpeed=5,this.sight.x=this.returnX+200,this.sight.y=this.returnY,GameData.ballRangle=3*GameData.ballBaseRangle},p.run=function(){null!=this.body&&(this.body.removeEventListener(egret.Event.COMPLETE,this.run,this),this.targer.removeChild(this.body),this.body=null);var e=RES.getRes(GameData.heroName+"_run_json"),t=RES.getRes(GameData.heroName+"_run_png"),a=new egret.MovieClipDataFactory(e,t);this.body=new egret.MovieClip(a.generateMovieClipData("run")),this.body.x=0,this.body.y=260,this.body.scaleX=GameData.Hero.scale,this.body.scaleY=GameData.Hero.scale,this.body.play(999),this.targer.addChild(this.body)},p.flash=function(){if(this.ball.rotation=(GameData.ballRangle+this.ball.rotation)%360,this.ball.x>this.targetX&&"shoot"==GameData.ballState){if(GameData.ballState="return",this.ball.x=this.targetX,this.sight.visible=!0,1==this.isCommon)return;return void this.setPath(GameData.enemyLestNum>0?!0:!1)}if(this.ball.x<this.returnX+1&&"return"==GameData.ballState)return GameData.ballRangle=GameData.ballBaseRangle,void(GameData.ballState="empty");if("shoot"==GameData.ballState){0==this.isCommon&&(this.targetX=GameData.firstX),this.ball.x+=2*GameData.ballSpeed+10;var e=(this.ball.x-this.ballBaseX)/(this.targetX-this.ballBaseX);this.ball.y=this.returnY+e*(this.targetY-this.returnY)}else if("return"==GameData.ballState){if(this.ball.x-=(this.targetX-this.returnX-200)/(this.targetX-this.ballBaseX)*(this.returnSpeed+GameData.returnSpeedUp),this.ball.x<30&&0==this.isDie)return void this.changeStage("die");var e=1-(this.ball.x-this.returnX-200)/(this.targetX-this.returnX-200);if(e<this.returnNodePre){var t=e/this.returnNodePre;this.ball.y=this.targetY+Math.sin(565.2*t/360)*(this.returnNodeY-this.targetY)}else if(e>.1+this.returnNodePre){GameData.hadHit=!1;var t=(e-this.returnNodePre)/(1-this.returnNodePre);this.ball.y=this.returnY+Math.sin(6.28*(90+90*t)/360)*(this.returnNodeY-this.returnY)}this.ball.x<200&&(this.isCommon=!1)}},p.setPath=function(e){this.returnType=e?Math.floor(4*Math.random()):0,0==this.returnType?(this.returnNodePre=.2,this.returnNodeY=365,this.returnX=-75,this.returnY=385,this.returnSpeed=10,GameData.ballRangle=6*GameData.ballBaseRangle):1==this.returnType?(this.returnNodePre=.45,this.returnNodeY=200,this.returnX=-65,this.returnY=270,this.returnSpeed=12,GameData.ballRangle=5*GameData.ballBaseRangle):2==this.returnType?(this.returnNodePre=.45,this.returnNodeY=100,this.returnX=-30,this.returnY=210,this.returnSpeed=10,GameData.ballRangle=3*GameData.ballBaseRangle):3==this.returnType&&(this.returnNodePre=.45,this.returnNodeY=50,this.returnX=-130,this.returnY=180,this.returnSpeed=10,GameData.ballRangle=2*GameData.ballBaseRangle),this.sight.x=this.returnX+200,this.sight.y=this.returnY},p.checkAttack=function(){1!=this.isDie&&this.sight.x-50<this.ball.x&&this.ball.x<this.sight.x+50&&(GameData.enemyLestNum>0&&0==this.isCommon&&GameData.isEnter?(Math.random()>.5?(this.changeStage("attack0"),this.attackIndex=0):(this.changeStage("attack1"),this.attackIndex=1),this.changeEffect(),GameData.ballState="empty",this.ball.visible=!1,this.sight.visible=!1):this.common())},e}();egret.registerClass(Hero,"Hero");var GameData=function(){function e(){}var t=(__define,e);return p=t.prototype,e.reset=function(){e.ballRangle=5,e.ballBaseRangle=5,e.ballSpeed=10,e.ballState="empty",e.attackOver=!0,e.hadHit=!1,e.score=0,e.goldChance=.5,e.enemyNum=2,e.enemyTypeNum=2,e.enemyFlashSpeed=10,e.enemyFlashSpace=500,e.enemyFlashLestSpace=200,e.firstX=999,e.enemyLestNum=0,e.isEnter=!1,e.returnSpeedUp=-1,e.backgroundSpeed=3},e.loadData=function(){console.log("loadData");for(var t=["Hero1","Hero2","Hero3"],a=0;a<t.length;a++)Tool.checkLocal(t[a])&&(e.heroList[a]="true"==Tool.getLocal(t[a])?!0:!1);e.goldNum=Tool.getLocal("goldNum"),null==e.goldNum&&(e.goldNum=0)},e.saveData=function(){console.log("saveData");for(var t=["Hero1","Hero2","Hero3"],a=0;a<t.length;a++)Tool.setLocal(t[a],e.heroList[a]);Tool.setLocal("goldNum",e.goldNum)},e.gameWidth=800,e.gameHeight=480,e.scaleSmall=1,e.heroName="Hero1",e.heroList=[!0,!1,!1],e.ballRangle=5,e.ballBaseRangle=5,e.ballSpeed=10,e.ballState="empty",e.attackOver=!0,e.hadHit=!1,e.score=0,e.goldNum=0,e.goldChance=.5,e.enemyNum=6,e.enemyTypeNum=4,e.enemyFlashSpeed=10,e.enemyFlashSpace=500,e.enemyFlashLestSpace=200,e.firstX=999,e.enemyLestNum=0,e.isEnter=!1,e.returnSpeedUp=0,e.backgroundSpeed=3,e.Hero={activation:!0,name:"Hero1",cost:300,offsetX:-30,offsetY:125,scale:.5,attackScale:.25,effect0Scale:1.5,effect1Scale:1.5},e.Enemy1={name:"Enemy1",scaleX:.5,scaleY:.5,run:{offsetX:130,offsetY:300},right:{offsetX:40,offsetY:300}},e.Enemy2={name:"Enemy2",scaleX:.5,scaleY:.5,run:{offsetX:130,offsetY:290},right:{offsetX:40,offsetY:290}},e}();egret.registerClass(GameData,"GameData");var Main=function(e){function t(){e.call(this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var a=(__define,t);return p=a.prototype,p.onAddToStage=function(){t.Stage=this,meiriq.CommonComponent.instance.init("football",this.stage),meiriq.CommonComponent.instance.load(function(){GameData.loadData(),GameData.reset(),UIManage.getInstance().showWelcome()},this,["welcome","select","game","hero","enemy"],"default.res.json")},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var GameScene=function(e){function t(){e.call(this),this.enemyFlashTime=9999,this.index=0,this.init()}__extends(t,e);var a=(__define,t);return p=a.prototype,p.init=function(){meiriq.CommonComponent.instance.executedHook("start"),meiriq.CommonComponent.instance.implementsInterFace("home",function(){UIManage.getInstance().hideGame(),UIManage.getInstance().showWelcome()},this),meiriq.CommonComponent.instance.implementsInterFace("pause",function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.flashGame,this)},this),meiriq.CommonComponent.instance.implementsInterFace("resume",function(){this.addEventListener(egret.Event.ENTER_FRAME,this.flashGame,this)},this),this.addEventListener(egret.Event.ENTER_FRAME,this.flashGame,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.background1=Tool.addBitmap(this,"game_background1_png",0,0,1e3,480,!0),this.background2=Tool.addBitmap(this,"game_background2_png",1e3,0,1e3,480,!0),this.goldIcon=Tool.addBitmap(this,"select_gold_png",600,20,50,50,!1),this.GoldNum=Tool.addBitmapText(this,"number_fnt",660,28,150,50,"99999"),this.hero=new Hero(this),this.enemyArray=[],this.enemyArray.push(new Enemy(this))},p.flashGame=function(){this.background1.x-=GameData.backgroundSpeed+.5*GameData.returnSpeedUp,this.background2.x-=GameData.backgroundSpeed+.5*GameData.returnSpeedUp,this.background1.x<0-this.background1.width&&(this.background1.x=this.background2.x+this.background2.width),this.background2.x<0-this.background2.width&&(this.background2.x=this.background1.x+this.background1.width),this.GoldNum.text=Tool.setZero(GameData.goldNum,4),GameData.firstX=999;for(var e=0,t=0;t<this.enemyArray.length;t++)this.enemyArray[t].flash(),GameData.firstX>this.enemyArray[t].siteX+20&&(GameData.firstX=this.enemyArray[t].siteX+20,e=t);GameData.firstX<this.hero.ball.x+20&&0==GameData.hadHit&&(this.enemyArray[e].die(),GameData.hadHit=!0),this.checkEnemy(),this.hero.flash()},p.checkEnemy=function(){for(var e=0;e<this.enemyArray.length;e++)1==this.enemyArray[e].isDie&&(Tool.removeOne(this.enemyArray,e),GameData.score++,GameData.returnSpeedUp<4&&(GameData.returnSpeedUp+=.1));if(this.enemyFlashTime++,this.enemyFlashTime>GameData.enemyFlashSpace&&this.enemyArray.length<GameData.enemyNum){this.enemyFlashTime=0;for(var t=Math.floor(3*Math.random())+2,e=0;t>e;e++)this.enemyArray.push(new Enemy(this));GameData.enemyFlashSpace>GameData.enemyFlashLestSpace&&(GameData.enemyFlashSpace-=GameData.enemyFlashSpeed)}GameData.enemyLestNum=this.enemyArray.length},p.onTouchStart=function(e){e.stopImmediatePropagation()},p.onTouchEnd=function(e){e.stopImmediatePropagation(),this.hero.checkAttack()},p.onRemove=function(e){e.target==this?(this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.flashGame,this)):(e.target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this))},p.test=function(){this.hero.changeStage("attack0"),this.hero.changeEffect()},t}(egret.DisplayObjectContainer);egret.registerClass(GameScene,"GameScene");var SelectScene=function(e){function t(){e.call(this),this.nameList=["Hero1","Hero2","Hero3"],this.nameIndex=0,this.init()}__extends(t,e);var a=(__define,t);return p=a.prototype,p.init=function(){this.background=Tool.addBitmap(this,"select_background_png",0,0,0,0,!1),this.goldIcon=Tool.addBitmap(this,"select_gold_png",600,20,50,50,!1),this.box=Tool.addBitmap(this,"select_box_png",265,100,300,300,!1),this.people=Tool.addBitmap(this,"select_Hero1_png",300,110,200,300,!1),this.left=Tool.addBitmap(this,"select_left_png",35,190,70,80,!0),this.right=Tool.addBitmap(this,"select_right_png",690,190,70,80,!0),this.start=Tool.addBitmap(this,"start0_png",275,410,150,55,!0),this.costIcon=Tool.addBitmap(this,"select_gold_png",420,60,50,50,!1),this.text=Tool.addBitmap(this,"select_text_png",340,65,70,35,!1),this.text2=Tool.addBitmap(this,"select_text2_png",323,200,200,100,!1),this.CostNum=Tool.addBitmapText(this,"number_fnt",485,65,150,50,"99999"),this.GoldNum=Tool.addBitmapText(this,"number_fnt",660,28,150,50,"99999"),this.left.alpha=.5,this.width=GameData.gameWidth,this.height=GameData.gameHeight,this.background.width=GameData.gameWidth,this.background.height=GameData.gameHeight,this.people.x=(this.width-this.people.width)/2,this.start.x=(this.width-this.start.width)/2,this.GoldNum.text=GameData.goldNum+"",this.getRole(this.nameList[this.nameIndex]),this.text.visible=!1,this.text2.visible=!1,this.CostNum.visible=!1,this.costIcon.visible=!1},p.onTouchStart=function(e){e.stopImmediatePropagation(),e.target==this.start&&(this.start.texture=RES.getRes(0==GameData.heroList[this.nameIndex]?"unlock1_png":"start1_png"))},p.onTouchEnd=function(e){e.stopImmediatePropagation(),e.target==this.left?this.onClickLeft():e.target==this.right?this.onClickRight():e.target==this.start&&this.onClickStart()},p.onClickStart=function(){if(0==GameData.heroList[this.nameIndex]){if(500>GameData.goldNum)return this.start.texture=RES.getRes("unlock0_png"),this.people.visible=!1,void(this.text2.visible=!0);this.text.visible=!1,this.CostNum.visible=!1,this.costIcon.visible=!1,GameData.goldNum-=500,this.GoldNum.text=GameData.goldNum+"",GameData.heroList[this.nameIndex]=!0,this.start.texture=RES.getRes("start0_png")}else GameData.saveData(),UIManage.getInstance().hideSelect(),UIManage.getInstance().showGame()},p.onRemove=function(e){e.target.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},p.onClickLeft=function(){.5!=this.left.alpha&&(this.nameIndex--,this.getRole(this.nameList[this.nameIndex]),this.left.alpha=0==this.nameIndex?.5:1,this.right.alpha=1)},p.onClickRight=function(){.5!=this.right.alpha&&(this.nameIndex++,this.getRole(this.nameList[this.nameIndex]),this.right.alpha=2==this.nameIndex?.5:1,this.left.alpha=1)},p.getRole=function(){GameData.heroName="Hero"+(this.nameIndex+1),this.text2.visible=!1,this.people.visible=!0,this.people.texture=RES.getRes("select_"+GameData.heroName+"_png"),console.log("this.nameIndex   "+this.nameIndex+"   "+GameData.heroList[this.nameIndex]+"   "+(1==GameData.heroList[this.nameIndex])),1==GameData.heroList[this.nameIndex]?(this.text.visible=!1,this.CostNum.visible=!1,this.costIcon.visible=!1,this.start.texture=RES.getRes("start0_png")):(this.text.visible=!0,this.CostNum.visible=!0,this.costIcon.visible=!0,this.CostNum.text="500",this.start.texture=RES.getRes("unlock0_png"))},t}(egret.DisplayObjectContainer);egret.registerClass(SelectScene,"SelectScene");var WelcomeScene=function(e){function t(){e.call(this),this.startOrSelect="",this.instrutionIndex=0,this.init()}__extends(t,e);var a=(__define,t);return p=a.prototype,p.init=function(){this.welcome_background=Tool.addBitmap(this,"welcome_background_png",0,0,GameData.gameWidth,GameData.gameHeight,!1),this.welcome_background.width=GameData.gameWidth,this.welcome_background.height=GameData.gameHeight,this.welcome_start=Tool.addBitmap(this,"welcome_start0_png",0,240,150,50,!0),this.welcome_start.x=(this.width-this.welcome_start.width)/2,this.welcome_select=Tool.addBitmap(this,"welcome_select0_png",0,320,150,50,!0),this.welcome_select.x=(this.width-this.welcome_select.width)/2,this.instrution=Tool.addBitmap(this,"instrution0_jpg",0,0,GameData.gameWidth,GameData.gameHeight,!0),this.instrution.width=GameData.gameWidth,this.instrution.height=GameData.gameHeight,this.instrution.visible=!1},p.onTouchStart=function(e){e.stopImmediatePropagation(),e.target==this.welcome_start?(this.startOrSelect="start",this.welcome_start.texture=RES.getRes("welcome_start1_png")):e.target==this.welcome_select&&(this.startOrSelect="select",this.welcome_select.texture=RES.getRes("welcome_select1_png"))},p.onTouchEnd=function(e){return e.stopImmediatePropagation(),Tool.checkLocal("football_first")?void(e.target==this.welcome_start?(UIManage.getInstance().hideWelcome(),UIManage.getInstance().showGame()):e.target==this.welcome_select?(UIManage.getInstance().hideWelcome(),UIManage.getInstance().showSelect()):e.target==this.instrution&&(UIManage.getInstance().hideWelcome(),"start"==this.startOrSelect?UIManage.getInstance().showGame():UIManage.getInstance().showSelect())):(this.instrution.visible=!0,this.instrutionIndex>0&&(this.instrution.texture=RES.getRes("instrution1_jpg"),Tool.setLocal("football_first","true")),void this.instrutionIndex++)},p.onRemove=function(e){e.target.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEnd,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchStart,this),e.target.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),e.target.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemove,this)},t}(egret.DisplayObjectContainer);egret.registerClass(WelcomeScene,"WelcomeScene");var Tool=function(){function e(){}var t=(__define,e);return p=t.prototype,e.addBitmap=function(e,t,a,i,s,n,h){var o=new egret.Bitmap;return o.texture=RES.getRes(t),0!=s&&(o.width=Math.floor(s*GameData.scaleSmall),o.height=Math.floor(n*GameData.scaleSmall)),o.x=Math.floor(a*GameData.scaleSmall),o.y=Math.floor(i*GameData.scaleSmall),e.addChild(o),h&&(o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchStart,e),o.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,e.onTouchEnd,e),o.addEventListener(egret.TouchEvent.TOUCH_END,e.onTouchEnd,e),o.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemove,e)),o},e.addBitmapText=function(e,t,a,i,s,n,h){var o=new egret.BitmapText;return o.font=RES.getRes(t),0!=s&&(o.width=Math.floor(s*GameData.scaleSmall),o.height=Math.floor(n*GameData.scaleSmall)),o.x=Math.floor(a*GameData.scaleSmall),o.y=Math.floor(i*GameData.scaleSmall),o.text=h,e.addChild(o),o},e.addTextField=function(e,t,a,i,s,n,h,o){var r=new egret.TextField;return r.x=Math.floor(t*GameData.scaleSmall),r.y=Math.floor(a*GameData.scaleSmall),0!=i&&(r.width=Math.floor(i*GameData.scaleSmall),r.height=Math.floor(s*GameData.scaleSmall)),r.textColor=h,r.bold=!0,r.size=Math.floor(n*GameData.scaleSmall),r.text=o,e.addChild(r),r},e.setLocal=function(e,t){localStorage.setItem(e,t)},e.getLocal=function(e){var t=localStorage.getItem(e);return t},e.checkLocal=function(e){var t=localStorage.getItem(e);return null==t||""==t?!1:!0},e.setZero=function(e,t){var a="";if(e.toString().length>=t){for(var i=0;t>i;i++)a+="9";return a}for(var i=e.toString().length;t>i;i++)a+="0";return a+e.toString()},e.removeOne=function(e,t){if(t>=0&&t<e.length){for(var a=t;a<e.length;a++)e[a]=e[a+1];e.length=e.length-1}},e}();egret.registerClass(Tool,"Tool");var UIManage=function(){function e(){if(null!=e.instance)throw new Error("UIManage had been Instanced");e.instance=this}var t=(__define,e);return p=t.prototype,e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},p.releaseAll=function(){null!=this.welcomeScene&&Main.Stage.removeChild(this.welcomeScene),null!=this.gameScene&&Main.Stage.removeChild(this.gameScene),this.welcomeScene=null,this.gameScene=null},p.showWelcome=function(){console.log("showWelcome"),null!=this.welcomeScene&&(this.welcomeScene=null),this.welcomeScene=new WelcomeScene,Main.Stage.addChild(this.welcomeScene)},p.hideWelcome=function(){null!=this.welcomeScene?(console.log("hideWelcome"),Main.Stage.removeChild(this.welcomeScene),this.welcomeScene=null):console.log("welcomeScene   had   not  instance")},p.showSelect=function(){console.log("showSelect"),null!=this.selectScene&&(this.selectScene=null),this.selectScene=new SelectScene,Main.Stage.addChild(this.selectScene)},p.hideSelect=function(){null!=this.selectScene?(console.log("hideSelect"),Main.Stage.removeChild(this.selectScene),this.selectScene=null):console.log("selectScene   had   not  instance")},p.showGame=function(){GameData.reset(),null!=this.gameScene&&(this.gameScene=null),this.gameScene=new GameScene,Main.Stage.addChild(this.gameScene),console.log("showGame")},p.hideGame=function(){null!=this.gameScene?(console.log("hideGame"),Main.Stage.removeChild(this.gameScene),this.gameScene=null):console.log("gameScene   had   not  instance")},e}();egret.registerClass(UIManage,"UIManage");